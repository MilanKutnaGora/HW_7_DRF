# **Бэкенд-сервер SPA-приложения "Образовательная онлайн платформа"**

### Docker

#### Собрать контейнеры командой `docker-compose build`

#### Запустить приложения командой `docker-compose up`

### Установка:

#### 1.  Убедитесь, что у вас установлен python 3.11 или более новая версия

#### 2.  Убедитесь, что у вас установлен PostgreSQL и запущен локальный сервер для базы данных

#### 3.  Убедитесь, что у вас установлен Redis и запущен redis-сервер

### Склонировать репозиторий:

#### 1.  Создать и активировать виртуальное окружение `python -m venv ваша_папка_для_виртуального_окружения`

#### 2.  Установить зависимости командой pip install -r requirements.txt

#### 3.  Создать вашу базу данных для работы с проектом `CREATE DATABASE ваша_база_данных`;

#### 4.  Создать миграции через python manage.py makemigrations и применить их `python manage.py migrate`

#### 5.  В файле _.env.sample_ заполнить данные для работы с проектом и переименовать его в _.env_

#### 6.  Открыть командную строку и запустить `python manage.py runserver`

#### 7.  Для запуска Celery открыть другой экземпляр командной строки и запустить `celery -A config worker -l INFO` -P eventlet

#### 8.  Для запуска _django-celery-beat_ открыть другой экземляр командной строки и запустить `celery -A config beat -l INFO`

#### 9.  Кастомная команда для создания суперпользователя `python manage.py cssu`


### Используемые стеки:

* #### DjangoRestFramework

* #### Docs/ReDoc host://docs/ host://redoc/, работает авторизация по Bearer токену

* #### Redis

* #### Celery

* #### Платёжная система Stripe, реализация через сессии

* #### Пагинация для вывода списка курсов

* #### DjangoFilters для фильтрации списка платежей

### Логика работы системы:

1. #### Зарегистрировать пользователя /users/register/

1. #### Получить токен пользователя /users/token/

1. #### Создать курс, создать уроки в курсе

1. #### Можно создать подписку на другой курс

1. #### Так как у каждого курса можно указать стоимость - реализована работа с платёжной системой stripe через сессии.



### Права доступа:

* #### Каждый пользователь имеет доступ только к своим курсам и урокам по механизму CRUD.

* #### Подписка на курс позволяет отслеживать изменения курса(редактирование курса, редактирование урока в курсе или создание нового урока)

* #### Предусмотрен функционал модератора, роль которого можно создать и назначить в админитративной панеле

* #### Модератор может видеть все курсы и уроки, может редактировать, но не может создавать или удалять их. Закрыт доступ к подпискам.

### Эндпоинты:

#### _Пользователи:_

* #### Создание пользователя

* #### Просмотр деталей профиля

* #### Редактирование профиля

* #### Получение токена

* #### Обновление токена

#### _Курс:_

* #### Создание курса

* #### Список курсов

* #### Информация о курсе

* #### Редактирование курса

* #### Удаление курса

#### _Урок:_

* #### Создание урока

* #### Список уроков в курсе

* #### Информация о уроке

* #### Редактирование урока

* #### Удаление урока

#### _Подписка:_

* #### Создание подписки

* #### Просмотр подписки

* #### Удаление подписки

#### _Платёж:_

* #### Список платежей

* #### Создание платежа

* #### Информация о платеже

* #### Удаление платежа
